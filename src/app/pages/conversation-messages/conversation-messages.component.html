<p-toast></p-toast>
<div class="chat">
  <div class="userInfo">
    @if (this.recipient.profilePic) {
      <img src="{{ this.recipient.profilePic }}" alt="">
    }
    @if (this.recipient.name) {
      <span>Talking to <span class="username">{{ recipient.name }}</span></span>  
    } @else {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }
  </div>
  <div class="chat-messages" #scrollPanel (scroll)="scrollOnTop()">
    @for (message of messages; track $index; let isLast = $last; let first = $first) {
      <!-- @if (first) {
        <p style="color: black;">Primeira mensagem</p>
      } -->
      <app-messages [message]="message" />
      <!-- @if (isLast) {
        <p style="color: black;">Ultima mensagem</p>
      } -->
    }
  </div>
  <div #bottomMarker></div>
  <mat-form-field class="chat-input" appearance="outline">
    <mat-label>Envie uma mensagem</mat-label>
    <input
      matInput
      [(ngModel)]="inputMessage"
      (keyup.enter)="sendMessage()"
    />
    <mat-icon (click)="sendMessage()" matSuffix>send</mat-icon>
  </mat-form-field>
</div>